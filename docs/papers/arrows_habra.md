# Стрелки как обобщенный интерфейс вычислений
## Что такое стрелка
Стрелка `Arrow<In, Out>` представляет некоторое вычисление, которое выполняется функцией `Out f(In x)`. 
Как вы уже могли догадаться `In` - тип принимаемого функцией значения, `Out` - тип возвращаемого значения. 
Преимуществом представления вычислений в виде стрелок является возможность явного комбинирования вычислений 
различными способами.

Например функцию `double multBy5_0(int in) { return in*5.0; }` можно представить в виде стрелки 
`Arrow<Integer, Double> arrMultBy5_0 = Action.of(multBy5_0);`.

Класс `Action` реализует интерфейс `Arrow`, другой реализацией этого интерфейса является `ParallelAction`, поддерживающий
многопоточные вычисления.

## Композиция стрелок
Стрелку `arrMultBy5_0` можно объединить последовательно с другой стрелкой, к примеру прибавляющей к входному значению 10.5, а затем - со следующей стрелкой, представляющей результат в виде строки. Получится цепочка из стрелок
```
Arrow<Integer, String> mult5Plus10toStr = arrMultBy5_0.join(in -> in+10.5)
                                                      .join(in -> String.valueOf(in));
mult5Plus10toStr.apply(10);      // == "60.5"                  
```  

При этом лямбда-функции автоматически преобразуются в стрелки. Получившееся вычисление, представленное составной стрелкой 
`mult5Plus10toStr` можно представить в виде блок-схемы:

Вход получившейся составной стрелки имеет тип `Integer`, то есть входной тип первого вычисления в цепочке, 
а выход имеет тип `String` - выходной тип последнего вычисления в цепочке. Метод `someArrow.join(f)` объединяет
в цепочку высление, представленное стрелкой `someArrow` с вычислением, представленным `f`, при этом `f` может быть другой стрелкой, лямбда-функцией, методом, или чем-то ещё, что реализует `Applicable`, то есть имеет метод `apply`, который 
можно применить к входному значению.

## Другие способы композиции стрелок
Кроме последовательного объединения методом `join` стрелки можно объединять параллельно методом `combine`, `cloneInput` и `split`

```
Write some example
```

Получившаяся "широкая" стрелка принимает на вход пару значений типа `Pair<>`, первое значение пары попадает на вход первой стрелки, второе - на вход втой, их результаты тоже объединяются в пару. Если такая стрелка будет объеденена в 
цепочку, то следующая стрелка должна принимать на вход значение типа `Pair<>` для согласования типов.

`someArrow.cloneInput(f)` создаёт стрелку, параллельно объединяя `someArrow` и `f` и применяя их к входу, её выход
представляется в виде пары `Pair<>`, объединяющей результаты этих вычилений. Входные типы `someArrow` и `f` должны совпадать.

Параллельное объединение в данном случае означает, что результат одного вычисления не зависит от результата другого, в отличии от 
последовательного объединения методом `join`, когда результат одного вычисления передаётся на вход другого. Многопоточные вычисления реализуется классом `ParallelAction`.

`someArrow.split(f, g)` - дополнительный метод, эквивалентный `someArrow.join(f.cloneInput(g))`. Результат вычисления `someArrow`
параллельно передаётся на вход `f` и `g`, выходом такой стрелки будет пара с результатами вычислений `f` и `g`. 

## Обход вычислений
В некоторых случаях есть необходимость передачи входного значения стрелки далее по цепочке стрелок вместе с результатом 
вычисления этой стрелки. Это реализуется методом `someArrow.first()` и дополняющим его `someArrow.second()`, преобразующим
стрелку `someArrow` так, что получившаяся стрелка передаёт на выход пару, содержащую результат вычисления `someArrow` и 
само входное значение `someArrow`.

```write some example``

Эти методы аналогичны методам `someArrow.bypass2nd()` и `someArrow.bypass1st()` соответственно. 


